#!/bin/bash

# 🟡 JUMAWAN WEEWKING BANNER
banner() {
  clear
  echo -e "\e[33m"
  echo "███████╗██╗   ██╗███╗   ███╗ █████╗ ██╗  ██╗ █████╗ ███╗   ██╗"
  echo "██╔════╝██║   ██║████╗ ████║██╔══██╗██║ ██╔╝██╔══██╗████╗  ██║"
  echo "█████╗  ██║   ██║██╔████╔██║███████║█████╔╝ ███████║██╔██╗ ██║"
  echo "██╔══╝  ██║   ██║██║╚██╔╝██║██╔══██║██╔═██╗ ██╔══██║██║╚██╗██║"
  echo "██║     ╚██████╔╝██║ ╚═╝ ██║██║  ██║██║  ██╗██║  ██║██║ ╚████║"
  echo "╚═╝      ╚═════╝ ╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═══╝"
  echo -e "\e[0m"
}

# 🟡 DNS List File
DNS_FILE="$HOME/.dnslist"
[ ! -f "$DNS_FILE" ] && echo -e "8.8.8.8\n1.1.1.1\nns-gtm.rafed.xyz\nns-weew.rafed.xyz" > "$DNS_FILE"

# 🟡 Booster IPs
BOOST_IPS=("8.8.8.8" "1.1.1.1" "124.6.181.31" "124.6.181.171" "124.6.181.26" "124.6.181.27" "124.6.181.25")

# 🟡 DNS Booster Function
dns_boost() {
  echo "Starting DNS Boost..."
  for ip in "${BOOST_IPS[@]}"; do
    echo "Boosting with $ip..."
    ping -c 3 "$ip"
  done
  echo "DNS Boost done!"
  sleep 2
}

# 🟡 Dig Loop Function
start_dig() {
  echo "Starting dig loop... Press CTRL+C to stop."
  while true; do
    while read -r ns; do
      echo "Digging $ns..."
      dig @$ns google.com
    done < "$DNS_FILE"
    sleep 5
  done
}

# 🟡 Add NS
add_ns() {
  read -p "Enter NS to add: " ns
  echo "$ns" >> "$DNS_FILE"
  echo "NS $ns added."
  sleep 1
}

# 🟡 Check NS
check_ns() {
  echo "Current NS entries:"
  cat "$DNS_FILE"
  sleep 2
}

# 🟡 Delete NS
delete_ns() {
  read -p "Enter NS to delete: " ns
  sed -i "/$ns/d" "$DNS_FILE"
  echo "NS $ns deleted."
  sleep 1
}

# 🟡 Autorun Setup
setup_autorun() {
  echo "bash $PWD/$(basename "$0")" > $PREFIX/etc/profile.d/jumawan.sh
  chmod +x $PREFIX/etc/profile.d/jumawan.sh
  echo "Autorun setup done!"
  sleep 1
}

# 🟡 Remove Autorun
remove_autorun() {
  rm -f $PREFIX/etc/profile.d/jumawan.sh
  echo "Autorun removed!"
  sleep 1
}

# 🟡 Main Menu
main_menu() {
  while true; do
    banner
    echo -e "\e[33m[1] Add NS"
    echo "[2] Check NS"
    echo "[3] Delete NS"
    echo "[4] Start Dig Loop"
    echo "[5] DNS Booster"
    echo "[6] Setup Autorun"
    echo "[7] Remove Autorun"
    echo "[8] Exit\e[0m"
    read -p "Choose an option: " opt
    case $opt in
      1) add_ns ;;
      2) check_ns ;;
      3) delete_ns ;;
      4) start_dig ;;
      5) dns_boost ;;
      6) setup_autorun ;;
      7) remove_autorun ;;
      8) exit ;;
      *) echo "Invalid option!" ;;
    esac
  done
}

# 🟡 Run Menu
main_menu
