#!/bin/bash

BANNER="JUMAWAN WEEWKING"
TERMINAL_COLORS="\e[1;33m"
RESET="\e[0m"

# Banner
clear
echo -e "${TERMINAL_COLORS}==========================================${RESET}"
echo -e "${TERMINAL_COLORS}======== ${BANNER} ========${RESET}"
echo -e "${TERMINAL_COLORS}==========================================${RESET}"

# Paths
NS_FILE="$HOME/.jumawan_ns"
AUTORUN_FILE="$HOME/.termux/boot/start.sh"

# Functions

check_dns() {
  echo -e "${TERMINAL_COLORS}Checking DNS...${RESET}"
  if [ -f "$NS_FILE" ]; then
    cat "$NS_FILE"
  else
    echo "No DNS entries yet."
  fi
}

start_booster() {
  echo -e "${TERMINAL_COLORS}Starting DNS Booster Loop... (Ctrl+C to stop)${RESET}"
  if [ -f "$NS_FILE" ]; then
    while true; do
      while read ns; do
        dig @$ns google.com
      done < "$NS_FILE"
      sleep 2
    done
  else
    echo "No DNS entries found!"
  fi
}

check_status() {
  echo -e "${TERMINAL_COLORS}Checking Booster Status...${RESET}"
  pgrep -af "dig" || echo "No booster process running."
}

add_dns() {
  echo "Enter DNS (e.g., 8.8.8.8):"
  read dns
  echo "$dns" >> "$NS_FILE"
  echo "DNS added!"
}

enable_autorun() {
  mkdir -p ~/.termux/boot
  echo "bash ~/weew" > "$AUTORUN_FILE"
  chmod +x "$AUTORUN_FILE"
  echo "Autorun enabled!"
}

disable_autorun() {
  rm -f "$AUTORUN_FILE"
  echo "Autorun disabled!"
}

check_autorun_status() {
  if [ -f "$AUTORUN_FILE" ]; then
    echo "Autorun is ENABLED."
  else
    echo "Autorun is DISABLED."
  fi
}

# Menu loop
while true; do
  echo -e "${TERMINAL_COLORS}==========================================${RESET}"
  echo "1. Check DNS"
  echo "2. Start Booster Loop"
  echo "3. Check Status"
  echo "4. Add DNS"
  echo "5. Enable Autorun"
  echo "6. Disable Autorun"
  echo "7. Exit"
  echo -e "${TERMINAL_COLORS}==========================================${RESET}"
  check_autorun_status
  echo -n "Enter your choice: "
  read choice

  case $choice in
    1) check_dns ;;
    2) start_booster ;;
    3) check_status ;;
    4) add_dns ;;
    5) enable_autorun ;;
    6) disable_autorun ;;
    7) echo "Goodbye!"; exit ;;
    *) echo "Invalid choice!" ;;
  esac
done
